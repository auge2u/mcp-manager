{"version":3,"file":"preload.js","sources":["../electron/preload.ts"],"sourcesContent":["import { contextBridge, ipcRenderer } from 'electron'\n\n// Type definitions for MCP configuration\ninterface MCPConfig {\n    command: string\n    args?: string[]\n    env?: Record<string, string>\n    projectId?: string\n}\n\n// Create type-safe event emitter for MCP events\ntype MCPEventCallback = (data: string) => void\nconst outputListeners = new Set<MCPEventCallback>()\nconst errorListeners = new Set<MCPEventCallback>()\n\n// Since contextIsolation is false, we can expose directly to window\nconst api = {\n    readConfig: () => {\n        console.log('Invoking readConfig from preload')\n        return ipcRenderer.invoke('read-config')\n    },\n    executeCommand: (command: string) => {\n        console.log('Invoking executeCommand from preload:', command)\n        return ipcRenderer.invoke('execute-command', command)\n    },\n    // New MCP management functions\n    launchMCP: (config: MCPConfig) => {\n        console.log('Launching MCP:', config)\n        return ipcRenderer.invoke('launch-mcp', config)\n    },\n    // MCP event listeners\n    onMCPOutput: (callback: MCPEventCallback) => {\n        outputListeners.add(callback)\n        return () => outputListeners.delete(callback)\n    },\n    onMCPError: (callback: MCPEventCallback) => {\n        errorListeners.add(callback)\n        return () => errorListeners.delete(callback)\n    }\n}\n\n// Handle MCP events from main process\nipcRenderer.on('mcp-output', (_event, data) => {\n    outputListeners.forEach(callback => callback(data))\n})\n\nipcRenderer.on('mcp-error', (_event, data) => {\n    errorListeners.forEach(callback => callback(data))\n})\n\n// Expose the API to window\n;(window as any).electron = api\n\n// This is needed for TypeScript\nexport {}\n"],"names":["ipcRenderer"],"mappings":";;AAYA,MAAM,sCAAsB,IAAsB;AAClD,MAAM,qCAAqB,IAAsB;AAGjD,MAAM,MAAM;AAAA,EACR,YAAY,MAAM;AACd,YAAQ,IAAI,kCAAkC;AACvC,WAAAA,SAAA,YAAY,OAAO,aAAa;AAAA,EAC3C;AAAA,EACA,gBAAgB,CAAC,YAAoB;AACzB,YAAA,IAAI,yCAAyC,OAAO;AACrD,WAAAA,qBAAY,OAAO,mBAAmB,OAAO;AAAA,EACxD;AAAA;AAAA,EAEA,WAAW,CAAC,WAAsB;AACtB,YAAA,IAAI,kBAAkB,MAAM;AAC7B,WAAAA,qBAAY,OAAO,cAAc,MAAM;AAAA,EAClD;AAAA;AAAA,EAEA,aAAa,CAAC,aAA+B;AACzC,oBAAgB,IAAI,QAAQ;AACrB,WAAA,MAAM,gBAAgB,OAAO,QAAQ;AAAA,EAChD;AAAA,EACA,YAAY,CAAC,aAA+B;AACxC,mBAAe,IAAI,QAAQ;AACpB,WAAA,MAAM,eAAe,OAAO,QAAQ;AAAA,EAAA;AAEnD;AAGAA,SAAA,YAAY,GAAG,cAAc,CAAC,QAAQ,SAAS;AAC3C,kBAAgB,QAAQ,CAAA,aAAY,SAAS,IAAI,CAAC;AACtD,CAAC;AAEDA,SAAA,YAAY,GAAG,aAAa,CAAC,QAAQ,SAAS;AAC1C,iBAAe,QAAQ,CAAA,aAAY,SAAS,IAAI,CAAC;AACrD,CAAC;AAGC,OAAe,WAAW;"}